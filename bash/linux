#Linux specific

#aliases
alias ls='ls --color=auto'

alias update='sudo pacman -Syu && aurget -Syu'
alias vpn='sudo vpnc summon'
alias unvpn='sudo vpnc-disconnect'
alias pw="tr -dc 'A-Za-z0-9!@#$%^&*' < /dev/urandom | fold -w 12 | head -n 1"
alias xq='cd /home/jonah/sersol/Content.xquery/xquery-module/src-xml/xquery'
alias td='cd /home/jonah/sersol/Content.testdata/testdata'

# To hook up x301 to HDTV via DisplayPort
alias hdtv='xrandr --output HDMI1 --mode 1440x900'
alias unhdtv='xrandr --output HDMI1 --off'

#config
# add personal bin to path
export PATH=$HOME/bin:$HOME/.cabal/bin:$PATH
export BROWSER="chromium '%s' &"

#cvs stuff
export CVS_RSH=ssh

#dircolors
eval `dircolors -b`
ulimit -c 20

#functions
##notes functions
n() { $EDITOR ~/notes/"$*".txt ;}
nls () { tree -CR --noreport ~/notes | awk '{ if ((NR > 1) gsub(/.txt/,"")); if (NF==1) print $1; else if (NF==2) print $2; else if (NF==3) printf " %s\n", $3 }' ;}

##"convert" docx files
function docx {
    google docs upload "$1"
    title=$(basename "$1" .docx)
    google docs get --title "$title"
    google docs delete --title "$title"
}

##"play" an album located in the current directory
function play {
mplayer -playlist <(find "$PWD" -type f -iname "*.mp3" -o -iname "*.ogg" | sort -n)
}

#ssh
SSH_ENV="$HOME/.ssh/environment"

function start_agent {
echo "Initializing new SSH agent..."
/usr/bin/ssh-agent | sed 's/^echo/#echo/' > "${SSH_ENV}"
echo succeeded
chmod 600 "${SSH_ENV}"
. "${SSH_ENV}" > /dev/null
/usr/bin/ssh-add;
}

# Source SSH settings, if applicable
if [ -f "${SSH_ENV}" ]; then
. "${SSH_ENV}" > /dev/null
#ps ${SSH_AGENT_PID} doesn't work under cygwin
ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
  start_agent;
    }
else
      start_agent;
fi
